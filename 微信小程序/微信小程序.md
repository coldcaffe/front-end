##小程序开发
    1.注册小程序开发者账号
        (1)https://mp.weixin.qq.com/ 右上角'立即注册'
        (2)选择注册账号的类型 '小程序'
        (3)填写账号信息
        (4)邮箱激活
        (5)点击链接激活
        (6)选择主体  '大陆-个人'  (没有微信认证/支付和高级接口能力)
        (7)主体信息登记
        (8)获取小程序的AppID    '开发 - 开发设置 - appid(小程序id,创建小程序项目时要用)'

    2.安装微信开发者工具及创建小程序项目
        一个官方提供,帮助快速创建小程序,进行功能调试,代码查看编辑和小程序预览与发布
        (1)安装完毕后,微信扫登陆安装成功时弹出的二维码,进入开发者界面
        (2)左上角齿轮设置项中,修改外观为浅色,18字号,行距12,代理模式为不使用代理
        (3)开发者界面中点击'+',创建并填写项目信息,本地创建项目文件夹,并在界面中关联代码地址
        (4)通过'编译'在开发界面(模拟器)查看效果,通过'预览'在真机上扫码预览项目效果

    3.小程序项目结构
        1.项目基本组成结构
            由pages,utils,app.js,app.json,app.wxss,project.config.json,sitemap.json
        
        2.小程序页面组成
            小程序官方建议把所有页面存放于pages目录中,以页面区分单独的文件夹存在

    4.小程序代码构成-json配置文件
        json是一种数据结构,开发中json常以配置文件形式出现,小程序中json常见4种json配置文件,以对项目进行不同级别的配置:
            (1)项目根目录中的app.json配置文件
                当前小程序的全局配置,包括小程序所有页面路径,窗口外观,界面表现和底部tab等;

                1.在app.json的pages中新增页面存放路径,工具可以自动创建对应的页面文件
                2.跳转pages中页面路径先后顺序,即可修改项目首页,默认把第一位页面当做首页渲染

            (2)项目根目录中的project.config.json配置文件
                项目配置文件,记录对小程序开发工具做的个性化设置

            (3)项目根目录中的sitemap.json配置文件
                用于配置小程序页面是否允许微信索引,类似于pc网页的seo,允许索引时,微信通过爬虫形式为小程序的页面建立索引,为小程序提高搜索权重

            (4)每个页面文件夹中的.json配置文件
                小程序每个页面都可以用.json文件对本页面的窗口外观进行配置,页面中的配置项会覆盖app.json的window中相同的配置项

    5.小程序代码构成-WXML模板
        wxml(weixin markup language)是小程序框架设计的一套标签语言,用于构建小程序页面的结构,类似于pc端的html,与html的区别:
            1.标签名称不同
                html(div,span,img,a)
                wxml(view,text,image,navigator)

            2.属性节点不同
                <a href='#'></a>
                <navigator url='/pages/home/home'></navigator>

            3.提供了类似于vue中的模板语法
                数据绑定,列表渲染,条件渲染

    6.小程序代码构成-wxss样式
        wxss(weixin style sheets)是一套用于描述wxml的组件样式语言,类似web中的css,二者区别:
            1.新增了rpx尺寸单位
                 css中需要手动进行像素单位换算,如rem,而wxss在底层支持rpx,不同屏幕小程序可以自动进行换算

            2.提供了全局的样式和局部样式
                项目根目录中的app.wxss会作用于所有小程序页面,局部页面的.wxss样式仅对当前页面生效

            3.wxss仅支持部分css选择器
                .class和#id
                element
                并集选择器,后代选择器
                ::after和::before等伪类选择器

    7.小程序代码构成-js逻辑交互
        小程序中js文件分为3大类:
            1.app.js
                整个小程序项目的入口文件,通过调用App()函数来启动整个小程序

            2.页面的.js文件
                页面的入口文件,通过调用Page()函数来创建并运行页面

            3.普通的.js文件
                普通的功能模块文件,用来封装公共的函数或属性供页面使用


##小程序宿主环境
    宿主环境(host environment)指的是程序运行所必须的依赖环境,比如安卓和ios系统,微信就是小程序的宿主环境

    小程序宿主环境包含的内容
        1.通信模型
            (1)通信主体
                小程序中通信的主体是渲染层和逻辑层,其中wxml和wxss样式工作在渲染层,js脚本工作在逻辑层
            (2)通信模型
                渲染层和逻辑层之间通信:由微信客户端进行转发
                逻辑层和第三方服务器之间通信:由微信客户端进行转发

        2.运行机制
            小程序启动过程
                (1)把小程序的代码包下载到本地
                (2)解析app.json全局配置文件
                (3)执行app.js小程序入口文件,调用App()创建小程序实例
                (4)渲染小程序首页
                (5)小程序启动完成

            页面渲染的过程
                (1)加载解析页面的.json配置文件
                (2)加载页面的.wxml模板和.wxss样式
                (3)执行页面的.js文件,调用Page()创建页面实例
                (4)页面渲染完成

        3.组件
            小程序中组件分类
                组件也是由宿主环境提供,开发者可以基于组件快速搭建漂亮的页面结构,官方将组件分为9类:
                    (1)视图容器(常用)
                        view
                            普通视图区域,类似于html中的块级元素div,常用于实现页面布局效果
                        scroll-view
                            可滚动的视图区域,常用于实现滚动列表效果
                        swiper和swiper-item
                            轮播图容器组件,和轮播图item组件

                    (2)基础内容(常用)
                        text
                            文本组件,类似html中的span标签,是一个行内元素(通过selectable属性,可以实现长按选中文本内容的效果)
                        rich-text
                            富文本组件,支持将html字符串渲染为wxml结构(通过nodes属性节点,可将html字符串渲染为对应的ui结构)
                        button
                            按钮组件,功能比html中button更丰富,可通过open-type属性,调用微信提供的各种功能(客服,转发,获取用户授权,获取用户信息等)
                        image
                            图片属性,image组件默认宽度约300px,高度约240px,可以通过mode属性来指定图片的裁剪和缩放模式,
                        navigator
                            页面导航组件,类似于html中的a标签

                    (3)表单组件(常用)
                    (4)导航组件(常用)
                    (5)媒体组件
                    (6)map地图组件
                    (7)canvas画布组件
                    (8)开放能力
                    (9)无障碍访问 
                        
        4.API
            小程序中api由宿主环境提供,官方将api分为了3大类:
                (1)事件监听api
                    特点: 以on开头,用于监听某些事件的触发
                    举例: wx.onWindowResize(function callback) 监听窗口尺寸变化的事件
                (2)同步api
                    特点: 以Sunc结尾的api,且同步api执行结果可通过函数返回值直接获取,执行出错抛异常
                    举例: vx.setStorageSync('key','value')向本地存储中写入数据
                (3)异步api
                    特点: 类似于jquery中的$.ajax(options)函数,须通过success,fail,conplete接收结果
                    举例: wx.request()发起网络数据请求,通过success回到函数接收数据


##协同工作和发布
    协同工作
        同一个小程序,有时会有岗位和角色的区分,此时涉及权限的边界划分,使得能够高效的进行协同工作;

    成员管理的两个方面
        1.项目成员
            表示参与小程序开发和运营的成员,可以登录小程序管理后台,管理员可以添加,删除项目成员,以及设置项目成员的角色;
        2.体验成员
            表示参与小程序内测体验的成员,可使用体验版小程序但不属于项目成员,管理员及项目成员均可添加,删除体验成员;

    发布上线
        1.小程序发布上线整体步骤
            上传代码->提价审核->发布

        2.基于小程序码进行推广
            登陆小程序管理后台->设置->基本设置->基本信息->小程序码及线下物料下载

        3.查看运营数据
            1.在小程序后台查看
                小程序管理后台中侧边栏'统计'项,相应的tab
            2.使用小程序数据助手查看
                微信小程序数据助手中查看绑定的已发布的小程序相关数据


##WXML模板语法
    数据绑定
        1.数据绑定的基本原则
            (1)在data中定义数据
                在页面对应的.js文件中,把数据定义到data对象中即可,data数据绑定到页面中渲染,使用Mustache语法格式为: <view>{{要绑定的数据名称}}</view>

                mustache语法主要应用场景: 
                    绑定元素
                    绑定属性
                    运算(三元运算,算数运算等)
            (2)在wxml中使用数据

    事件绑定
        事件是渲染层到逻辑层的通讯方式,通过事件可以将用户在渲染层产生的行为反馈到逻辑层进行业务的处理;
        当事件回调触发时,会收到一个事件对象event(其中常用target和detail属性)

            target和currentTarget的区别
                target是触发该事件的源头组件,而currentTarget则是当前事件所绑定的组件,以点击事件为例,e.target是内部的按钮组件,而e.currentTarget则是当前正在触发事件的view组件

            bindtap的语法格式
                小程序中不存在html中的onclick鼠标点击事件,而是通过tap事件来响应用户触摸行为:
                    1.通过bindtap可为组件绑定tap触摸事件
                    2.在页面.js文件中定义对应的事件处理函数,事件参数通过形参event(简写为e)来接受

        在事件处理函数中为data中数据赋值
            通过调用this.setData(dataObject)方法,可以给页面data中的数据重新赋值

        事件传参
            小程序中事件传参比较特殊,不能再绑定数据的同时为事件处理函数传递参数,因为小程序会把bindtap的属性值,统一当做事件名称来处理;此时可以为组件提供'data-*'自定义属性传参,其中*代表的是参数的名字,如 data-info = '{{2}}':info会被解析为参数名,数值2则被解析为参数值;
                
            事件处理函数中,通过event.target.dataset.参数名,即可获取到具体参数的值

        bindinput的语法格式
            小程序中通过input事件来响应文本框的输入事件
                1.通过bindinput可以为文本框绑定输入事件
                2.在页面的.js文件中定义事件处理函数

    条件渲染
        wx:if
            小程序中使用wx:if="{{condition}}"来判断是否㤇渲染该代码块;也可使用wx:elif和wx:else来添加else判断;

            结合<block>使用wx:if
                如果要一次性控制多个组件的展示与隐藏,可以使用一个block标签将多个组件包装起来,并在<block>标签上使用wx:if控制属性;block不是组件,只是一个包裹性质的容器,不会在页面中做任何渲染;

        hidden
            在小程序中,直接使用hidden="{{condition}}" 也能控制元素的显示与隐藏

        wx:if与hidden的对比
            1.运行方式不同
                wx:if以动态创建和移除元素的方式,控制元素的展示于隐藏
                hidden以切换样式的方式(display:none/block;)控制元素的显示隐藏
            2.使用建议
                频繁切换时,建议使用hidden;
                控制条件复杂时,建议使用wx:if搭配wx:elif,wx:else进行展示与隐藏的切换

    列表渲染
        wx:for
            通过wx:for可以根据指定的数组,循环渲染重复的组件结构,默认情况下当前循环项的索引用index表示,当前循环项则用item表示;

            手动指定索引和当前项的变量名*
                使用wx:for-index可以指定当前循环项的索引的变量名
                使用wx:for-item可以指定当前项的变量名

        wx:key的使用
            类似于vue列表渲染中的:key,小程序在实现列表渲染时,也建议为渲染出来的列表项指定唯一的key值,从而提高渲染的效率;    


##WXSS模板样式
    wxss和css的关系
        wxss具有css大部分特性,同时wxss对css进行了扩充和修改,wxss扩展的特性有:
            1.rpx尺寸单位
                rpx(responsive pixel)是微信小程序独有的,用于解决屏适配的尺寸单位,鉴于不同设备屏幕大小不同,为实现屏幕自动适配,rpx把所有屏幕在宽度上等分为750份(即屏幕宽度为750rpx),在较小屏幕上1rpx所代表宽度较小,在较大设备上,1rpx所代表宽度较大;小程序在不同设备运行时,会自动把rpx换算成对应的像素单位来渲染,从而实现屏幕适配;

                rpx与px之间的单位换算
                    以iphone6,屏幕宽度为375px换算: 750rpx = 375px = 750物理像素
                        即: 1rpx = 0.5px = 1物理像素

                    开发时建议使用iphone6作为视觉稿的标准(因为刚好算出来是整数值)

            2.@import样式导入
                使用wxss提供的@import语法,可以导入外联的样式表,@import后面跟需要导入的外联样式表的相对路径,用;表示语句结束

    全局样式和局部样式
        1.全局样式
            定义在app.wxss中的样式为全局样式,作用于每一个页面;

        2.局部样式
            在页面.wxss文件中定义的样式为局部样式,只作用于当前页面;

            (1)当局部样式和全局样式冲突时,根据就近原则,局部样式会覆盖全局样式
            (2)当局部样式的权重大于或等于全局样式的权重时,才会覆盖全局的样式

        全局配置
            小程序根目录下的app.json文件是小程序的全局配置文件,常用配置项:
                (1)pages
                    记录当前小程序所有页面的存放路径
                (2)window
                    全局设置小程序窗口的外观
                (3)tabBar
                    设置小程序底部的tabBar效果
                (4)style
                    是否启用新版的组件样式

            window
                小程序窗口组成:navigationBar导航栏区,background 背景区域(默认不可见,下拉才显示),页面主体区域(用来显示wxml中的布局)

                设置导航栏的标题
                    步骤: app.json -> window -> navigationBarTitleText -> 修改对应属性文本内容

                设置导航栏的背景色
                    步骤: app.json -> window -> navigationBarBackgroundColor -> '#fff'

                设置导航栏的标题颜色
                    步骤: app.json -> window -> navigationBarTextStyle -> white(只有black和white可选)

                全局开启下拉刷新功能
                    指的是手指在屏幕上的下拉滑动操作,从而重新加载页面数据的行为,开启后作用于所有小程序页面;
                    步骤: app.json -> window -> enablePullDownRefresh -> true

                设置下拉刷新时窗口的背景色
                    步骤: app.json -> window -> backgroundColor -> #efefef

                设置下拉刷新时loading的样式
                    步骤: app.json -> window -> backgroundRTextStyle -> dark(只有light和dark可选)

                设置上拉触底的距离
                    移动端专有名词,指通过手指在屏幕上的上拉滑动操作,从而加载更多数据的行为;
                    步骤: app.json -> window -> onReachBottomDistance -> 50px(无特殊情况下默认值)

            tabBar
                tabBar是移动端应用常见页面效果,用于实现多页面的快速切换,小程序中通常分为:
                    1.底部tabBar
                    2.顶部tabBar
                    tabBar中只能配置至少2个,最多5个tab页签,当渲染顶部tabBar时不显示icon,只显示文本;

        页面配置
            小程序中每个页面都有自己的.json配置文件,用于对当前页面的窗口外观,页面效果等进行配置;

            页面配置与全局配置的关系
                小程序中app.json中的window节点,可以全局配置小程序中每个页面的窗口表现,如某些小程序页面想要展示特殊的窗口表现,此时'页面级别的.json配置文件'就可以实现这个需求;

                注意:当页面配置与全局配置冲突时,根据就近原则,最终效果以页面配置为准;


##数据请求
    出于安全性考虑,小程序官方对数据接口的请求做出了如下两个限制:
        1.只能请求https类型的接口
        2.必须将接口的域名添加到信任列表中

    配置request合法域名
        登陆微信小程序管理后台 -> 开发 -> 开发设置 -> 服务器域名 -> 修改request合法域名(https域名)
        1.域名只支持https协议
        2.域名不能使用IP地址或localhost
        3.域名必须经过ICP备案
        4.服务器域名一个月内最多可申请5次修改

    发起get/post请求
        调用wx.request()方法,可以发起get/post数据请求(根据method填入值进行区分)

    在页面刚加载时请求数据
        很多情况下需要在页面刚加载时自动请求一些初始化的数据,此时需要在页面的onload事件中调用获取数据的函数;

    跳过request合法域名校验
        如果后端仅提供了http协议的接口,暂时没有提供https协议的接口,此时为不耽误开发进度,可以在工具中临时开启'开发环境不校验请求域名,tls版本及https证书'选项,跳过requst合法域名的校验(线上不可用);

    关于跨域与ajax的说明
        跨域问题仅存在于基于浏览器的web开发中,由于小程序宿主不是浏览器,而是微信客户端,因此小程序中不存在跨域问题;ajax依赖于浏览器中的XMLHttpRequst对象,由于小程序宿主环境是微信客户端,因此小程序中不能叫做发起ajax请求,而是叫做发起网络数据请求;



















































































