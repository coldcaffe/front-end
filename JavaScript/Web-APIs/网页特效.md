#pc端网页特效
##元素偏移量offset系列
    offset概述 
        offset就是偏移量,可使用offset系列相关属性 动态的 得到该元素的位置(偏移),大小等(返回数值不带单位)      

        获得元素距离带有定位父元素的位置
        获得元素自身的大小(宽度高度)

        element.offsetParent    返回作为该元素带有定位的父级元素,如果父级没有定位则返回body
        element.offsetTop       返回元素相对带有定位父元素上方的偏移
        element.offsetLeft      返回元素相对带有定位父元素左边框的偏移
        element.offsetWidth     返回自身包括padding,边框,内容区的宽度,返回数值不带单位
        element.offsetHeight    返回自 身包括padding,边框,内容区的宽度,返回数值不带单位

    offset与style区别
        offset  获取元素大小位置更合适
            offset可以得到任意样式表中的样式值
            offset系列获得的数值没有单位
            offsetWidth等属性是只读属性,只能获取不能赋值

        style   给元素更改值更合适
            style只能得到行内样式表中的样式值
            style.width获得的是带有单位的字符串
            style.width获得不包含padding和border的值
            style.width是只读写属性,可以获取也可以赋值


##元素可视区client系列
    client翻译过来就是客户端,可使用client系列的相关属性来获取元素可视区的相关信息,通过client系列的相关属性动态得到该元素的边框大小,元素大小等;

    element.clientTop       返回元素上边框的大小
    element.clientLeft      返回元素左边框的大小
    element.clientWidth     返回自身包括padding,内容区的宽度,不含边框,返回数值不带单位(重点)
    element.clientHeight    返回自身包括padding,内容区的宽度,不含边框,返回数值不带单位(重点)


    淘宝flexible.js源码分析
        1.立即执行函数(function(){})()    主要作用是创建一个独立的作用域,里面所有的变量都是局部变量,不会与命名冲突的情况;

        2.window.devicePixelRatio 物理像素比

        3.使用pageshow进行页面加载的原因
        a标签超链接/F5或刷新/前进后退按钮都可以刷新页面并触发load事件,但是火狐浏览器有个'往返缓存',这个缓存中保存着页面数据和DOM及js的状态,实际上将整个页面都保存在了内存里;所以此时后退按钮不能刷新页面,此时可以使用'pageshow'事件来进行触发,此事件在页面显示时触发,无论页面是否来自缓存,重新加载页面中pageshow会在load事件触发后触发,根据事件对象中的persisted来判断你是否是缓存中的页面触发的pageshow事件,注意这个时间给window添加;


    元素滚动scroll系列属性
        使用scroll系列的相关属性可以动态的得到该元素的大小,滚动距离等
        element.scrollTop       返回被卷去的上侧距离,返回数值不带单位
        element.scrollLeft      返回被卷去的左侧距离,返回数值不带单位
        element.scrollWidth     返回自身实际的宽度,不含边框,返回数值不带单位
        element.scrollHeight    返回自身实际的高度,不含边框,返回数值不带单位

        仿淘宝固定侧边栏案例要点:
            1.页面被卷去头部:使用window.pageYoffset获得,被卷去左侧则使用window.pageXoffset
            2.元素被卷去头部使用element.scrollTop,而页面被卷去头部则是window.pageYoffset
            3.页面被卷去的头部兼容性解决方案,有如下几种解决方案:
                (1)声明了DTD(html文件头),使用document.documentElement.scrollTop
                (2)未声明DTD,使用document.body.scrollTop
                (3)新方法window.pageYOffset和window.pageXOffset,ie9开始支持


##三大系列总结
    三大系列大小对比
        element.offsetWidth     返回自身包括padding,边框,内容区的宽度,返回数值不带单位
        element.clientWidth     返回自身包括padding,内容区的宽度,不包含边框,返回数值不带单位
        element.scrollWidth     返回自身实际的宽度,不含边框,返回数值不带单位

    常见用法:
        1.offset系列常用于获得元素位置 offsetLeft offsetTop
        2.client系列常用于获取元素大小 clientWidth clientHeight
        3.scroll系列常用于获取滚动距离 scrollTop scrollLeft
        4.注意页面滚动的距离通过window.pageXoffset获得


##缓动动画原理和封装
    mouseenter鼠标事件
        当鼠标移动到元素上时就会触发mouseenter事件,类似于mouseover;二者的区别是mouseover鼠标经过自身盒子会触发,经过子盒子还会触发,而mouseenter只会经过自身盒子触发;之所以会这样,就是因为mouseenter不会冒泡;和mouseenter搭配的mouseleave同样不会冒泡;

    动画实现原理
        核心原理:通过定时器setInterval()不断移动盒子位置,步骤:
            1.获得盒子当前位置
            2.让盒子在当前位置加上1个移动距离
            3.利用定时器不断重复这个操作
            4.加一个结束定时器的条件
            5.注意此元素必须添加定位,才能使用element.style.left

    动态函数给不同元素记录不同定时器
        如果多个元素都使用同一个动画函数,每次都要var声明定时器,因此可以给不同元素使用不同的定时器(专用);
        
        核心原理: 利用js是一门动态语言的特性,可以很方便的给当前对象添加属性;

    缓动动画效果原理
        缓动动画就是让元素运动速度有所变化,最常见的就是让速度慢慢停下来,思路:
            1.让盒子每次移动的距离慢慢变小,速度就会慢慢落下来
            2.核心算法:(目标值 - 现在位置) / 10 作为每次移动的距离步长
            3.停止的条件是:让当前盒子位置等于目标位置就停止定时器
            4.步长值需要取整(否则无法到达位置)

    动画函数在多个目标值之间移动
        可以让动画函数从800移动到500,当点击按钮时判断步长是负值还是正值
            1.如果是正值,则步长往大了取整
            2.如果是负值,则步长向小了取整

    动画函数添加回调函数
        回调函数原理: 函数可以作为一个参数,将这个函数作为参数传到另一个函数中去,当那个函数执行完毕后,再执行传进去的这个函数,这个过程就叫做回调;

    动画函数封装到单独js文件中
        如果经常要使用这个动画函数,可以单独封装到一个js文件里面,使用时引用这个js文件即可;
            




#移动端网页特效
##触屏事件
    移动端touch触摸事件
        移动端浏览器兼容性较好,不需考虑以前js的兼容性问题,可以放心使用原生js书写效果,但是移动端也有自己独特的地方,比如触屏事件touch(也称触摸事件),Android和iOS都有;

        touchstart  手指触摸到一个DOM元素时触发
        touchmove   手指在一个DOM元素上滑动时触发
        touchend    手指从一个DOM元素上移开时触发

    触摸事件对象(TouchEvent)
        touchevent是一类描述手指在触摸平面(触摸屏,触摸板等)的状态变化的事件,这类事件用于描述一个或多个触点,使开发者可以检测触点的移动,触点的增加或减少等等;

        touchstart,touchmove,touchend三个事件都会各各自有事件对象

        touches         正在触摸屏幕的所有手指的一个列表(可能多个手指同时触摸)
        tartgetTouches  正在触摸当前DOM元素上的手指的一个列表
        changedTouches  手指状态发生了改变的列表,从无到有,从有到无变化

    移动端拖动元素
        1.touchstart,touchmove,touchend可以实现拖动元素
        2.但是拖动元素需要当前手指的坐标值,可以使用targetTouches[0]里面的pageX和pageY
        3.移动端拖动原理: 手指移动中,计算出手指移动距离,然后用盒子原来位置+手指移动距离
        4.手指移动的距离: 手指滑动中的位置减去手指刚开始触摸的位置

        拖动元素的三步骤:
            1.触摸元素touchstart: 获取手指初始坐标,同时获得盒子原来的位置
            2.移动手指touchmove: 计算手指的滑动位置,并且移动盒子
            3.离开手指touchend

            注意: 手指移动也会触发滚动屏幕,因此这里要阻止默认的屏幕滚动 e.preventDefault();

    移动端轮播图
        ul.style.transition = 'all .3s'; 可实现图片的过渡效果

        无缝滚动
            1.需要判断图片滚动完毕后再去判断,即过渡完成后再判断,此时需要添加检测过渡完成事件transitionend
            2.如果索引号等于3,则说明走到最后一张图片,此时索引号要复原为0,将图片去掉过渡效果后移动   ul.style.transition = 'none';
            3.如果索引号小于0,说明是倒着走,索引号等于2,此时图片去除过渡效果后移动


##移动端常见特效
    classList属性
        html5新增的一个属性,返回元素的类名,但是ie10以上版本支持(移动端不用管)

        添加类名:   element.classList.add('类名'); 
            新增类名前面不要加'.'
        移除类名:   element.classList.remove('类名');
        切换类名:   element.classList.toggle('类名');
            没有的话添加,有的话删除(类似于开关)

    Swiper插件的使用
        开源,强大的触摸滑屏插件 www.swiper.com
        1.官网下载swiper,然后将其中相关的js和css引入工程
        2.参照需要的效果,将相关的html结构和css样式粘贴进工程css文件
        3.工程中编写相关的js代码进行调用
        4.如果有搜索框或其他需要顶层展示的内容,通过z-index方式提升排序展示

    swiper参数更改
        根据swiper官网api中相关效果进行参数修改即可

    其他移动端常见插件
        superslide: www.superslide2.com
        iscroll: github-> cubiq/iscroll

    插件的使用总结
        1.确认插件的功能
        2.去官网查看使用说明
        3.下载插件
        4.打开demo实例文件,查看需要引入的相关文件,并且引入
        5.复制demo实例文件中的结构html,样式css以及js代码

    移动端视频插件 zy.media.js
        h5提供了video标签,但是浏览器的支持情况不同,不同的视频格式文件可以通过source解决,但是外观样式还有暂停,播放,全屏等功能只能自己写代码解决,此时可以使用插件方式解决;


##移动端常用开发框架
    框架旨在基于自身特点向用户提供一套较为完整的解决方案,框架的控制权在框架本身,使用者要按照框架所规定的某种规范进行开发.而插件一般是为了解决某个问题而专门存在,功能单一且较小;

    前端常用框架: Bootstrap,Vue,Angular,React等,既能开发PC端,也能开发移动端
    前端常用移动端插件有: swiper,superslide,iscroll等


##移动端常见特效问题处理
    click延时解决方案
        移动端click事件会有300ms的延时,原因是移动端屏幕双击会缩放(double tap to zoom)页面,解决方案有如下几种:

        1.禁用缩放,浏览器禁用默认的双击缩放行为,并且去掉300ms的点击延迟
            <meta name="viewport" content="user-scalable=no">
            缺点:有时用户确实需要缩放功能,头部禁止缩放后此页面就不可以缩放了

        2.利用touch事件自己封装这个时间解决300ms延迟,原理如下:
            (1)当我们手指触摸屏幕,记录当前触摸时间
            (2)当手指离开屏幕,用离开的时间减去触摸的时间
            (3)如果时间小于150ms,并且没有滑动过屏幕,那么就定义为点击
            缺点:不够灵活,可能存在频繁调用的冗余场景

        3.使用fastclick插件解决(最优解)
            github-> ftlabs/fastclick


##本地存储
    本地存储特性
        1.数据存储在用户浏览器中
        2.设置,读取方便,甚至页面刷新不丢失数据
        3.容量较大,sessionStorage约5M,localStorage约20M
        4.只能存储字符串,可以将对象JSON.stringify()编码后存储 

    1.window.sessionStorage
        页面浏览器application项中Storage中查看sessionStorage
        1.生命周期为关闭浏览器窗口
        2.在同一个窗口(页面)下数据可以共享
        3.以键值对的形式存储使用

        存储数据: sessionStorage.setItem(key,value);
        获取数据: sessionStorage.getItem(key);
        删除数据: sessionStorage.removeItem(key);
        删除所有数据: sessionStorage.clear();


    2.window.localStorage
        1.声明周期永久生效,除非手动删除,否则即使关闭页面也会存在
        2.可以多窗口(页面)共享(同一浏览器可以共享)
        3.以键值对的形式存储使用,但是只能存储字符串格式,如果是数组对象等,需要转成字符串再存

        存储数据: localStorage.setItem(key,value);
        获取数据: localStorage.getItem(key);
        删除数据: localStorage.removeItem(key);
        删除所有数据: localStorage.clear();
